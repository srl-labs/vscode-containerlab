<!-- Node Editor Panel with Tabs -->
<div
  class="panel panel-overlay panel-editor fixed bottom-10 left-20 w-[420px] max-h-[600px] overflow-y-hidden overflow-x-hidden z-[21] draggable-panel"
  id="panel-node-editor" style="display: none;">

  <p class="panel-heading" id="panel-node-editor-heading">
    Node Editor
  </p>

  <!-- Tab Navigation -->
  <div class="panel-tabs">
    <button class="panel-tab-button tab-active" data-tab="basic">Basic</button>
    <button class="panel-tab-button" data-tab="config">Configuration</button>
    <button class="panel-tab-button" data-tab="runtime">Runtime</button>
    <button class="panel-tab-button" data-tab="network">Network</button>
    <button class="panel-tab-button" data-tab="advanced">Advanced</button>
  </div>

    <!-- Tab Content Container -->
    <div class="panel-block p-0">
      <div class="p-2 max-h-[420px] overflow-y-auto">

      <!-- Basic Tab -->
      <div class="tab-content" id="tab-basic">
        <div class="space-y-3">
        <!-- Node Name -->
        <div class="form-group" id="node-name-group">
          <label class="block vscode-label mb-1">Node Name</label>
          <input type="text" id="node-name" class="input-field w-full">
        </div>

        <!-- Custom Node Name -->
        <div class="form-group" id="node-custom-name-group">
          <label class="block vscode-label mb-1">Custom Node Name</label>
          <input type="text" id="node-custom-name" class="input-field w-full" placeholder="Template name">
          <label class="block vscode-label mb-1 mt-2">Base Name (for canvas)</label>
          <input type="text" id="node-base-name" class="input-field w-full" placeholder="e.g., srl (will become srl1, srl2, etc.)">
          <div class="flex items-center mt-1">
            <input type="checkbox" id="node-custom-default" class="vscode-checkbox mr-2">
            <label for="node-custom-default" class="checkbox-label">Set as default</label>
          </div>
        </div>

        <!-- Kind -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Kind</label>
          <div id="node-kind-dropdown-container"></div>
        </div>

        <!-- Type -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Type</label>
          <div id="panel-node-type-dropdown-container" style="display: none;"></div>
          <input type="text" id="node-type" class="input-field w-full" placeholder="e.g., ixrd1, ixr-d2l" style="display: block;">
        </div>

        <!-- Image and Version in same row -->
        <div class="grid grid-cols-2 gap-2">
          <div class="form-group">
            <label class="block vscode-label mb-1">Image</label>
            <div id="node-image-dropdown-container"></div>
          </div>
          <div class="form-group">
            <label class="block vscode-label mb-1">Version</label>
            <div id="node-version-dropdown-container"></div>
          </div>
        </div>

        <!-- Icon -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Icon</label>
          <div id="panel-node-topoviewerrole-dropdown-container"></div>
        </div>

        <!-- Group -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Group</label>
          <input type="text" id="node-group" class="input-field w-full" placeholder="Optional group name">
        </div>
      </div>
    </div>

      <!-- Configuration Tab -->
      <div class="tab-content hidden" id="tab-config">
        <div class="space-y-3">
        <!-- Startup Config -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Startup Config</label>
          <input type="text" id="node-startup-config" class="input-field w-full" placeholder="Path to config file">
          <div class="flex items-center mt-1">
            <input type="checkbox" id="node-enforce-startup-config" class="vscode-checkbox mr-2">
            <label for="node-enforce-startup-config" class="checkbox-label">Enforce startup config</label>
          </div>
          <div class="flex items-center mt-1">
            <input type="checkbox" id="node-suppress-startup-config" class="vscode-checkbox mr-2">
            <label for="node-suppress-startup-config" class="checkbox-label">Suppress startup config</label>
          </div>
        </div>

        <!-- License -->
        <div class="form-group">
          <label class="block vscode-label mb-1">License File</label>
          <input type="text" id="node-license" class="input-field w-full" placeholder="Path to license file">
        </div>

        <!-- Binds -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Bind Mounts</label>
          <div id="node-binds-container" class="space-y-2">
            <!-- Dynamic bind entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addBindEntry()">
            <i class="fas fa-plus mr-1"></i> Add Bind
          </button>
        </div>

        <!-- Environment Variables -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Environment Variables</label>
          <div id="node-env-container" class="space-y-2">
            <!-- Dynamic env entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addEnvEntry()">
            <i class="fas fa-plus mr-1"></i> Add Variable
          </button>
        </div>

        <!-- Labels -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Labels</label>
          <div id="node-labels-container" class="space-y-2">
            <!-- Dynamic label entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addLabelEntry()">
            <i class="fas fa-plus mr-1"></i> Add Label
          </button>
        </div>
      </div>
    </div>

      <!-- Runtime Tab -->
      <div class="tab-content hidden" id="tab-runtime">
        <div class="space-y-3">
        <!-- User -->
        <div class="form-group">
          <label class="block vscode-label mb-1">User</label>
          <input type="text" id="node-user" class="input-field w-full" placeholder="Container user">
        </div>

        <!-- Entrypoint -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Entrypoint</label>
          <input type="text" id="node-entrypoint" class="input-field w-full" placeholder="Container entrypoint">
        </div>

        <!-- CMD -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Command</label>
          <input type="text" id="node-cmd" class="input-field w-full" placeholder="Container command">
        </div>

        <!-- Exec Commands -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Exec Commands</label>
          <div id="node-exec-container" class="space-y-2">
            <!-- Dynamic exec entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addExecEntry()">
            <i class="fas fa-plus mr-1"></i> Add Command
          </button>
        </div>

        <!-- Restart Policy -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Restart Policy</label>
          <div id="node-restart-policy-dropdown-container"></div>
        </div>

        <!-- Auto Remove -->
        <div class="form-group">
          <div class="flex items-center">
            <input type="checkbox" id="node-auto-remove" class="vscode-checkbox mr-2">
            <label for="node-auto-remove" class="checkbox-label">Auto-remove container on exit</label>
          </div>
        </div>

        <!-- Startup Delay -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Startup Delay (seconds)</label>
          <input type="number" id="node-startup-delay" class="input-field w-full" min="0" placeholder="0">
        </div>
      </div>
    </div>

      <!-- Network Tab -->
      <div class="tab-content hidden" id="tab-network">
        <div class="space-y-3">
        <!-- Management IPv4 -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Management IPv4</label>
          <input type="text" id="node-mgmt-ipv4" class="input-field w-full" placeholder="e.g., 172.20.20.100">
        </div>

        <!-- Management IPv6 -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Management IPv6</label>
          <input type="text" id="node-mgmt-ipv6" class="input-field w-full" placeholder="e.g., 2001:db8::100">
        </div>

        <!-- Network Mode -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Network Mode</label>
          <div id="node-network-mode-dropdown-container"></div>
        </div>

        <!-- Ports -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Port Mappings</label>
          <div id="node-ports-container" class="space-y-2">
            <!-- Dynamic port entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addPortEntry()">
            <i class="fas fa-plus mr-1"></i> Add Port
          </button>
        </div>

        <!-- DNS Configuration -->
        <div class="form-group">
          <label class="block vscode-label mb-1">DNS Servers</label>
          <div id="node-dns-servers-container" class="space-y-2">
            <!-- Dynamic DNS server entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addDnsServerEntry()">
            <i class="fas fa-plus mr-1"></i> Add DNS Server
          </button>
        </div>

        <!-- Aliases -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Network Aliases</label>
          <div id="node-aliases-container" class="space-y-2">
            <!-- Dynamic alias entries will be added here -->
          </div>
          <button class="btn btn-small mt-2" onclick="addAliasEntry()">
            <i class="fas fa-plus mr-1"></i> Add Alias
          </button>
        </div>
      </div>
    </div>

      <!-- Advanced Tab -->
      <div class="tab-content hidden" id="tab-advanced">
        <div class="space-y-3">
        <!-- Resources Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">Resource Limits</h3>
          <div class="grid grid-cols-2 gap-2">
            <!-- CPU -->
            <div class="form-group">
              <label class="block vscode-label mb-1">CPU Limit</label>
              <input type="number" id="node-cpu" class="input-field w-full" step="0.1" min="0" placeholder="e.g., 1.5">
            </div>

            <!-- CPU Set -->
            <div class="form-group">
              <label class="block vscode-label mb-1">CPU Set</label>
              <input type="text" id="node-cpu-set" class="input-field w-full" placeholder="e.g., 0-3, 0,3">
            </div>
            <!-- Memory -->
            <div class="form-group">
              <label class="block vscode-label mb-1">Memory Limit</label>
              <input type="text" id="node-memory" class="input-field w-full" placeholder="e.g., 1Gb, 512Mb">
            </div>

            <!-- Shared Memory Size -->
            <div class="form-group">
              <label class="block vscode-label mb-1">Shared Memory Size</label>
              <input type="text" id="node-shm-size" class="input-field w-full" placeholder="e.g., 256MB">
            </div>
          </div>
        </div>

        <!-- Capabilities Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">Capabilities</h3>

          <!-- Cap Add -->
          <div class="form-group">
            <label class="block vscode-label mb-1">Add Capabilities</label>
            <div id="node-cap-add-container" class="space-y-2">
              <!-- Dynamic capability entries will be added here -->
            </div>
            <button class="btn btn-small mt-2" onclick="addCapabilityEntry()">
              <i class="fas fa-plus mr-1"></i> Add Capability
            </button>
          </div>
        </div>

        <!-- Sysctls Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">Sysctls</h3>

          <div class="form-group">
            <div id="node-sysctls-container" class="space-y-2">
              <!-- Dynamic sysctl entries will be added here -->
            </div>
            <button class="btn btn-small mt-2" onclick="addSysctlEntry()">
              <i class="fas fa-plus mr-1"></i> Add Sysctl
            </button>
          </div>
        </div>

        <!-- Devices Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">Devices</h3>

          <div class="form-group">
            <div id="node-devices-container" class="space-y-2">
              <!-- Dynamic device entries will be added here -->
            </div>
            <button class="btn btn-small mt-2" onclick="addDeviceEntry()">
              <i class="fas fa-plus mr-1"></i> Add Device
            </button>
          </div>
        </div>

        <!-- Certificate Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">TLS Certificate</h3>

          <div class="form-group">
            <div class="flex items-center">
              <input type="checkbox" id="node-cert-issue" class="vscode-checkbox mr-2">
              <label for="node-cert-issue" class="checkbox-label">Auto-generate TLS certificate</label>
            </div>
          </div>

          <div id="cert-options" class="mt-2 hidden">
            <div class="form-group">
              <label class="block vscode-label mb-1">Key Size</label>
              <div id="node-cert-key-size-dropdown-container"></div>
              </div>

            <div class="form-group">
              <label class="block vscode-label mb-1">Validity Duration</label>
              <input type="text" id="node-cert-validity" class="input-field w-full" placeholder="e.g., 1h, 30d, 1y">
            </div>

            <div class="form-group">
              <label class="block vscode-label mb-1">SANs (Subject Alternative Names)</label>
              <div id="node-sans-container" class="space-y-2">
                <!-- Dynamic SAN entries will be added here -->
              </div>
              <button class="btn btn-small mt-2" onclick="addSanEntry()">
                <i class="fas fa-plus mr-1"></i> Add SAN
              </button>
            </div>
          </div>
        </div>

        <!-- Healthcheck Section -->
        <div class="border-b pb-3 mb-3" style="border-color: var(--vscode-panel-border);">
          <h3 class="vscode-section-header mb-2">Health Check</h3>

          <div class="form-group">
            <label class="block vscode-label mb-1">Test Command</label>
            <input type="text" id="node-healthcheck-test" class="input-field w-full"
              placeholder="e.g., CMD-SHELL cat /etc/os-release">
          </div>

          <div class="grid grid-cols-2 gap-2">
            <div class="form-group">
              <label class="block vscode-label mb-1">Start Period (s)</label>
              <input type="number" id="node-healthcheck-start-period" class="input-field w-full" min="0"
                placeholder="0">
            </div>
            <div class="form-group">
              <label class="block vscode-label mb-1">Interval (s)</label>
              <input type="number" id="node-healthcheck-interval" class="input-field w-full" min="0" placeholder="30">
            </div>
            <div class="form-group">
              <label class="block vscode-label mb-1">Timeout (s)</label>
              <input type="number" id="node-healthcheck-timeout" class="input-field w-full" min="0" placeholder="30">
            </div>
            <div class="form-group">
              <label class="block vscode-label mb-1">Retries</label>
              <input type="number" id="node-healthcheck-retries" class="input-field w-full" min="0" placeholder="3">
            </div>
          </div>
        </div>

        <!-- Image Pull Policy -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Image Pull Policy</label>
          <div id="node-image-pull-policy-dropdown-container"></div>
        </div>

        <!-- Runtime -->
        <div class="form-group">
          <label class="block vscode-label mb-1">Container Runtime</label>
          <div id="node-runtime-dropdown-container"></div>
        </div>
      </div>
      </div>
    </div>

  </div>

  <!-- Footer with Save/Cancel buttons -->
  <div class="panel-block flex items-center">
    <div class="w-1/5 pr-1"></div>
    <div class="w-4/5 pl-2 pr-4 space-x-2 flex justify-end">
      <button id="panel-node-editor-save" class="btn btn-primary btn-small">Save</button>
      <button id="panel-node-editor-cancel" class="btn btn-outlined btn-small">Close</button>
    </div>
  </div>

</div>
