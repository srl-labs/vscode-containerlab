<!-- Link Properties Panel -->
<section
  class="panel panel-overlay bottom-10 left-20 draggable-panel w-[500px] h-[500px] min-w-[100px] min-h-[200px] overflow-hidden"
  id="panel-link"
  style="display: none; resize: both"
>
  <div class="panel-heading panel-title-bar">
    <span class="panel-title">Link Properties</span>
    <button class="panel-close-btn" id="panel-link-close" aria-label="Close" title="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="p-0 pb-2 flex flex-col h-[calc(100%-40px)] overflow-hidden">
    <!-- Tabs for endpoints -->
    <div class="flex border-b border-gray-700 shrink-0">
      <button class="endpoint-tab panel-tab-button tab-active" data-endpoint="a">Endpoint A</button>
      <button class="endpoint-tab panel-tab-button" data-endpoint="b">Endpoint B</button>
    </div>

    <!-- Tab content containers -->
    <div id="endpoint-a-content" class="endpoint-content flex-1 flex flex-col min-h-0">
      <div class="grid grid-cols-3 gap-4 mb-3 mt-2 px-4 shrink-0">
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">MAC</span>
          <span
            id="panel-link-endpoint-a-mac-address"
            class="text-sm text-[var(--vscode-foreground)]"
          >
            N/A
          </span>
        </div>
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">MTU</span>
          <span id="panel-link-endpoint-a-mtu" class="text-sm text-[var(--vscode-foreground)]">
            N/A
          </span>
        </div>
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">Type</span>
          <span id="panel-link-endpoint-a-type" class="text-sm text-[var(--vscode-foreground)]">
            N/A
          </span>
        </div>
      </div>
      <div class="graph-container flex-1 min-h-0">
        <div id="panel-link-endpoint-a-graph" class="w-full h-full mb-1"></div>
      </div>
    </div>

    <div
      id="endpoint-b-content"
      class="endpoint-content flex-1 flex flex-col min-h-0"
      style="display: none"
    >
      <div class="grid grid-cols-3 gap-4 mb-3 mt-2 px-4 shrink-0">
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">MAC</span>
          <span
            id="panel-link-endpoint-b-mac-address"
            class="text-sm text-[var(--vscode-foreground)]"
          >
            N/A
          </span>
        </div>
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">MTU</span>
          <span id="panel-link-endpoint-b-mtu" class="text-sm text-[var(--vscode-foreground)]">
            N/A
          </span>
        </div>
        <div class="flex flex-col items-center">
          <span class="vscode-label text-xs mb-1 font-bold">Type</span>
          <span id="panel-link-endpoint-b-type" class="text-sm text-[var(--vscode-foreground)]">
            N/A
          </span>
        </div>
      </div>
      <div class="graph-container flex-1 min-h-0">
        <div id="panel-link-endpoint-b-graph" class="w-full h-full mb-1"></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Tab switching functionality
    const tabs = document.querySelectorAll(".endpoint-tab");
    const contents = document.querySelectorAll(".endpoint-content");

    tabs.forEach((tab) => {
      tab.addEventListener("click", function () {
        const endpoint = this.getAttribute("data-endpoint");

        // Update tab styles - use tab-active class like node editor
        tabs.forEach((t) => {
          t.classList.remove("tab-active");
        });
        this.classList.add("tab-active");

        // Update content visibility
        contents.forEach((content) => {
          content.style.display = "none";
        });
        const activeContent = document.getElementById(`endpoint-${endpoint}-content`);
        if (activeContent) {
          activeContent.style.display = "flex";
          // Dispatch event to trigger graph resize after tab switch
          window.dispatchEvent(new CustomEvent("link-tab-switched", { detail: { endpoint } }));
        }
      });
    });
  });
</script>
