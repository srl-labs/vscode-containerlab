@import "tailwindcss";

/* Tailwind v4 Configuration */
@source "./../../../../src/topoViewer/**/*.{ts,tsx,html}";
@source "./../../../../src/topoViewerEditor/**/*.{ts,tsx,html}";

@theme {
  /* Custom colors from tailwind.config.js */
  --color-vscode-bg: var(--vscode-editor-background);
  --color-vscode-fg: var(--vscode-editor-foreground);
  --color-vscode-panel-bg: var(--vscode-panel-background);
  --color-vscode-panel-fg: var(--vscode-panel-foreground);
  --color-vscode-sidebar-bg: var(--vscode-sideBar-background);
  --color-vscode-sidebar-fg: var(--vscode-sideBar-foreground);
  --color-vscode-button-bg: var(--vscode-button-background);
  --color-vscode-button-fg: var(--vscode-button-foreground);
  --color-vscode-button-hover: var(--vscode-button-hoverBackground);
  --color-vscode-input-bg: var(--vscode-input-background);
  --color-vscode-input-fg: var(--vscode-input-foreground);
  --color-vscode-input-border: var(--vscode-input-border);
  --color-vscode-dropdown-bg: var(--vscode-dropdown-background);
  --color-vscode-dropdown-fg: var(--vscode-dropdown-foreground);
  --color-vscode-dropdown-border: var(--vscode-dropdown-border);
  --color-vscode-link: var(--vscode-textLink-foreground);
  --color-vscode-link-hover: var(--vscode-textLink-activeForeground);

  /* Dark theme colors */
  --color-dark-navbar: rgb(24, 24, 24);
  --color-dark-panel: rgb(40, 40, 40);
  --color-dark-border: #363636;
  --color-dark-text: #ffffff;
  --color-dark-text-muted: #b5b5b5;

  /* Light theme colors */
  --color-light-navbar: rgb(70, 86, 246);
  --color-light-panel: #ffffff;
  --color-light-border: #dbdbdb;
  --color-light-text: #000000;
  --color-light-text-muted: #4a4a4a;

  /* Custom font sizes */
  --font-size-xxs: 0.625rem;

  /* Custom spacing */
  --spacing-18: 4.5rem;
  --spacing-88: 22rem;

  /* Custom box shadows */
  --shadow-panel: 0 8px 24px rgba(0, 0, 0, 0.15);
  --shadow-panel-dark: 0 8px 24px rgba(0, 0, 0, 0.3);
  --shadow-navbar: 0px 3px 6px rgba(0, 0, 0, 0.1);
  --shadow-navbar-dark: 0px 3px 6px rgba(0, 0, 0, 0.4);

  /* Custom z-index values */
  --z-9: 9;
  --z-99: 99;
  --z-999: 999;
  --z-9999: 9999;
  --z-99999: 99999;
}

/* Dark mode selector */
@variant dark (&:where(.dark, [data-theme="dark"], .dark *));

/* VSCode Theme Variables */
:root {
  --bg-primary: var(--vscode-editor-background);
  --bg-secondary: var(--vscode-panel-background);
  --bg-hover: var(--vscode-list-hoverBackground);
  --text-primary: var(--vscode-editor-foreground);
  --text-secondary: var(--vscode-descriptionForeground);
  --border: var(--vscode-panel-border);
  --accent: var(--vscode-button-background);
  --accent-hover: var(--vscode-button-hoverBackground);
  --success: var(--vscode-charts-green);
  --warning: var(--vscode-charts-yellow);
  --error: var(--vscode-charts-red);
  --info: var(--vscode-charts-blue);
  --diff-add: var(--vscode-diffEditor-insertedTextBorder, var(--vscode-charts-green));
  --diff-add-bg: var(--vscode-diffEditor-insertedTextBackground);
  --diff-add-line-bg: var(--vscode-diffEditor-insertedLineBackground, var(--vscode-diffEditor-insertedTextBackground));
  --diff-remove: var(--vscode-diffEditor-removedTextBorder, var(--vscode-charts-red));
  --diff-remove-bg: var(--vscode-diffEditor-removedTextBackground);
  --diff-remove-line-bg: var(--vscode-diffEditor-removedLineBackground, var(--vscode-diffEditor-removedTextBackground));
  --diff-line-number: var(--vscode-editorLineNumber-foreground);
  /* Navbar height for viewport offset */
  --navbar-height: 4.5rem;
}

@layer base {

  html,
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
  }
}

/* Custom component classes using Tailwind */
@layer components {

  /* Ensure filterable dropdown menus don't propagate scroll to parents */
  .filterable-dropdown-menu {
    overscroll-behavior: contain;
  }

  /* Button styles */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem;
    font-weight: 500;
    border-radius: 0.375rem;
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
    background-color: var(--vscode-button-secondaryBackground);
    color: var(--vscode-button-secondaryForeground);
  }

  .btn:hover {
    background-color: var(--vscode-button-secondaryHoverBackground, var(--vscode-button-hoverBackground));
    cursor: pointer;
  }

  .btn-primary {
    background-color: var(--accent);
    color: var(--vscode-button-foreground);
  }

  .btn-primary:hover {
    background-color: var(--accent-hover);
  }

  .btn-secondary {
    background-color: var(--vscode-button-secondaryBackground);
    color: var(--vscode-button-secondaryForeground);
  }

  .btn-secondary:hover {
    background-color: var(--vscode-button-secondaryHoverBackground, var(--vscode-button-secondaryBackground));
  }

  .btn-outlined {
    border: 1px solid var(--accent);
    color: var(--accent);
    background-color: transparent;
  }

  .btn-outlined:hover {
    background-color: var(--bg-hover);
  }

  .btn-danger {
    border: 1px solid var(--error);
    color: var(--error);
    background-color: transparent;
  }

  .btn-danger:hover {
    background-color: var(--error);
    color: var(--color-vscode-button-fg)
  }

  .btn-small {
    padding: 0.25rem 0.75rem;
  }

  .btn-icon {
    padding: 0.5rem;
  }

  .btn-icon-hover-clean {
    padding: 0.5rem;
    background-color: transparent;
    transition: ho;
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
    border-radius: var(--radius-md);
  }

  .btn-icon-hover-clean:hover {
    background-color: var(--vscode-button-hoverBackground);
    cursor: pointer;
  }

  /* Panel styles */
  .panel {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .panel-heading,
  .panel-header {
    background-color: var(--vscode-sideBar-background);
    border-bottom: 1px solid var(--border);
    padding: 0.75rem 1rem;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .panel-block {
    border-bottom: 1px solid var(--border);
    padding: 0.75rem 1rem;
  }

  /*only the footer (last direct child of .panel) removes it */
  .panel>.panel-block:last-child {
    border-bottom: 0;
  }

  /* Dropdown styles */
  .dropdown-menu {
    background-color: var(--vscode-dropdown-background,
        var(--vscode-editor-background));
    border: 1px solid var(--vscode-dropdown-border,
        var(--vscode-editor-foreground));
    position: absolute;
    z-index: 50;
    margin-top: 0.25rem;
    border-radius: 0.375rem;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
    min-width: 12rem;
    max-width: 20rem;
  }

  .dropdown-button {
    padding: 0.5rem 0.75rem;
    font-size: var(--vscode-font-size);
    border-radius: 0.25rem;
    display: inline-flex;
    align-items: center;
    background-color: var(--vscode-dropdown-background,
        var(--vscode-editor-background));
    color: var(--vscode-dropdown-foreground,
        var(--text-primary));
  }

  .dropdown-button:hover {
    background-color: var(--vscode-list-hoverBackground,
        var(--bg-hover));
  }

  .dropdown-item {
    color: var(--vscode-dropdown-foreground,
        var(--text-primary));
    display: block;
    padding: 0.5rem 1rem;
    font-size: var(--vscode-font-size);
    cursor: pointer;
  }

  .dropdown-item:hover {
    background-color: var(--vscode-list-hoverBackground,
        var(--bg-hover));
  }

  /* Tippy.js theme for add node menu */
  .tippy-box[data-theme~='dropdown-menu'] {
    background-color: var(--vscode-dropdown-background) !important;
    color: var(--vscode-dropdown-foreground) !important;
    border: 1px solid var(--vscode-dropdown-border) !important;
    border-radius: 0.375rem;
    box-shadow: var(--vscode-widget-shadow, 0 2px 8px rgba(0, 0, 0, 0.16));
    padding: 0;
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size, 13px);
  }

  .tippy-box[data-theme~='dropdown-menu'] .tippy-content {
    padding: 0;
    background: transparent !important;
  }

  .tippy-box[data-theme~='dropdown-menu'] .tippy-arrow {
    color: var(--vscode-dropdown-background) !important;
  }

  .tippy-box[data-theme~='dropdown-menu'] .tippy-backdrop {
    background-color: var(--vscode-dropdown-background) !important;
  }

  /* Add node menu specific styles */
  .add-node-menu-item {
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color 0.15s ease;
    color: var(--vscode-dropdown-foreground);
    background: transparent;
    cursor: pointer;
  }

  .add-node-menu-item:hover {
    background-color: var(--vscode-list-hoverBackground);
  }

  .add-node-menu-item:first-child {
    border-top-left-radius: 0.375rem;
    border-top-right-radius: 0.375rem;
  }

  .add-node-menu-item:last-child {
    border-bottom-left-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
  }

  .add-node-menu-item--top-divider {
    border-top: 1px solid var(--vscode-widget-border, var(--vscode-dropdown-border));
    margin-top: 0.25rem;
  }

  .add-node-menu-separator {
    height: 1px;
    background-color: var(--vscode-widget-border, var(--vscode-dropdown-border));
    margin: 0.25rem 0;
  }

  .add-node-default-btn,
  .add-node-edit-btn,
  .add-node-delete-btn {
    opacity: 0;
    transition: opacity 0.15s ease;
    padding: 0.25rem 0.5rem;
    font-size: 1.125rem;
    line-height: 1;
    border-radius: 0.25rem;
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .add-node-default-btn {
    color: var(--vscode-editorWarning-foreground, #ffcc00);
  }

  .add-node-default-btn.is-default {
    opacity: 1;
  }

  .add-node-default-btn:not(.is-default) {
    color: var(--vscode-textLink-foreground);
  }

  .add-node-edit-btn {
    color: var(--vscode-textLink-foreground);
  }

  .add-node-delete-btn {
    color: var(--vscode-errorForeground);
  }

  .add-node-menu-item:hover .add-node-default-btn,
  .add-node-menu-item:hover .add-node-edit-btn,
  .add-node-menu-item:hover .add-node-delete-btn {
    opacity: 1;
  }

  .add-node-default-btn:hover,
  .add-node-edit-btn:hover {
    background-color: var(--vscode-toolbar-hoverBackground, rgba(90, 93, 94, 0.15));
  }

  .add-node-default-btn:not(.is-default):hover {
    color: var(--vscode-editorWarning-foreground, #ffcc00);
  }

  .add-node-delete-btn:hover {
    background-color: var(--vscode-toolbar-hoverBackground, rgba(90, 93, 94, 0.15));
  }

  /* Filter input styles */
  .filter-input:focus {
    border-color: var(--vscode-focusBorder) !important;
    outline: none !important;
  }

  .filterable-item {
    transition: background-color 0.1s ease;
  }

  /* Input styles */
  .slot-field-shell {
    display: flex;
    align-items: stretch;
    width: 100%;
    height: 100%;
    min-width: 6.5rem;
    border: 1px solid var(--vscode-input-border);
    border-radius: 0.375rem;
    background-color: var(--vscode-input-background);
    overflow: visible;
    transition: border-color 0.12s ease, box-shadow 0.12s ease;
  }

  .slot-field-shell:focus-within {
    border-color: var(--vscode-focusBorder);
    box-shadow: 0 0 0 1px var(--vscode-focusBorder);
  }

  .slot-dropdown {
    display: flex;
    align-items: stretch;
    flex: 1 1 auto;
    min-width: 0;
  }

  .slot-dropdown .filterable-dropdown {
    display: flex;
    align-items: stretch;
    width: 100%;
  }

  .slot-field-shell .filterable-dropdown-input-container {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
    height: 100%;
  }

  .slot-field-shell .filterable-dropdown-input-container .input-field {
    flex: 1 1 auto;
    border: none;
    border-radius: 0;
    background: transparent;
    box-shadow: none;
    padding: 0.375rem 0.75rem;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
  }

  .slot-field-shell .filterable-dropdown-input-container .input-field:focus {
    border: none;
    box-shadow: none;
  }

  .slot-badge {
    min-width: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 0.375rem 0.45rem 0.375rem 0.2rem;
    border-right: 1px solid var(--vscode-input-border);
    background-color: var(--vscode-input-background);
    color: var(--vscode-editor-foreground);
    font-size: 0.8125rem;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.01em;
  }

  .slot-number-input {
    flex: 1 1 auto;
    min-width: 0;
    border: none;
    border-radius: 0;
    background: transparent;
    box-shadow: none;
    padding: 0.375rem 0.75rem;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
    text-align: left;
  }

  .slot-number-input:focus {
    border: none;
    box-shadow: none;
    outline: none;
  }

  .input-field {
    background-color: var(--vscode-input-background);
    color: var(--vscode-input-foreground);
    border: 1px solid var(--vscode-input-border);
    width: 100%;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
    outline: none;
  }

  .input-field:focus {
    border-color: var(--vscode-focusBorder);
    box-shadow: 0 0 0 2px var(--vscode-focusBorder);
  }

  .navbar-menu {
    position: absolute;
    right: 0;
    top: calc(100% + 0.25rem);
    min-width: 14rem;
    padding: 0.25rem 0;
    background-color: var(--vscode-menu-background, var(--vscode-dropdown-background, var(--vscode-editorWidget-background)));
    color: var(--vscode-menu-foreground, var(--vscode-foreground));
    border: 1px solid var(--vscode-menu-border, rgba(128, 128, 128, 0.35));
    border-radius: 0.375rem;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
    z-index: 30;
  }

  .navbar-menu-option {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    background: transparent;
    border: none;
    color: inherit;
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    cursor: pointer;
    gap: 0.5rem;
    transition: background-color 0.1s ease, color 0.1s ease;
  }

  .navbar-menu-option span {
    flex: 1;
    text-align: left;
    white-space: nowrap;
  }

  .navbar-menu-option:hover,
  .navbar-menu-option:focus {
    background-color: var(--vscode-menu-selectionBackground, rgba(64, 166, 255, 0.18));
    color: var(--vscode-menu-selectionForeground, var(--vscode-foreground));
    outline: none;
  }

  .navbar-menu-option[data-selected="true"] {
    background-color: var(--vscode-menu-selectionBackground, rgba(64, 166, 255, 0.18));
    color: var(--vscode-menu-selectionForeground, var(--vscode-foreground));
  }

  .navbar-menu-option-check {
    margin-left: auto;
    opacity: 0;
    transition: opacity 0.1s ease;
  }

  .navbar-menu-option[data-selected="true"] .navbar-menu-option-check {
    opacity: 1;
  }
  
  /* Label styles */
  .label {
    color: var(--text-primary);
    display: block;
    font-weight: 500;
  }

  /* Modal styles */
  .modal-backdrop {
    background-color: rgba(0, 0, 0, 0.5);
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 50;
  }

  .modal-content {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 0.5rem;
    box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
    z-index: 50;
    max-width: 42rem;
    width: 100%;
    max-height: 90vh;
    overflow: auto;
  }

  /* Loading spinner */
  .loading-spinner {
    border-color: var(--vscode-progressBar-background);
    border-top-color: var(--accent);
    display: inline-block;
    width: 2rem;
    height: 2rem;
    border-width: 4px;
    border-radius: 9999px;
    animation: spin 1s linear infinite;
  }

  /* Navbar styles */
  .navbar {
    background-color: var(--vscode-tab-activeBackground);
    border-bottom: 1px solid var(--vscode-tab-border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .navbar-loading-indicator {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 3px;
    pointer-events: none;
    overflow: hidden;
    opacity: 0;
    transition: opacity 180ms ease-in-out;
    background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground, rgba(255, 255, 255, 0.1)) 70%, transparent);
    border-bottom: 1px solid var(--vscode-tab-border, transparent);
  }

  .navbar-loading-indicator.is-active {
    opacity: 1;
  }

  .navbar-loading-indicator__bar {
    position: absolute;
    inset: 0;
    border-radius: 9999px;
    opacity: 0;
    background-size: 220% 100%;
    transform-origin: left center;
  }

  .navbar-loading-indicator.is-active .navbar-loading-indicator__bar {
    opacity: 0.9;
  }

  .navbar-loading-indicator.is-active.is-deploy .navbar-loading-indicator__bar {
    background-image: linear-gradient(
      90deg,
      transparent 0%,
      color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 25%, transparent) 15%,
      color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 90%, transparent) 45%,
      color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 25%, transparent) 75%,
      transparent 100%
    );
    animation: navbar-progress-sweep 1.15s linear infinite;
  }

  .navbar-loading-indicator.is-active.is-destroy .navbar-loading-indicator__bar {
    background-image: linear-gradient(
      90deg,
      transparent 0%,
      color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 30%, transparent) 15%,
      color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 95%, transparent) 45%,
      color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 30%, transparent) 75%,
      transparent 100%
    );
    animation: navbar-progress-sweep 1.15s linear infinite;
  }

  @keyframes navbar-progress-sweep {
    0% {
      background-position: 120% 0;
    }

    100% {
      background-position: -60% 0;
    }
  }

  button.processing {
    position: relative;
    cursor: wait;
  }

  button.processing i {
    opacity: 0.35;
  }

  button.processing::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 6px;
    border-radius: 50%;
    border: 2px solid transparent;
    opacity: 0;
    animation: deploy-processing-spinner 0.9s linear infinite;
  }

  button.processing.processing--deploy {
    color: var(--vscode-button-foreground);
    background-color: color-mix(
      in srgb,
      var(--vscode-testing-iconPassed, #73c991) 40%,
      var(--vscode-button-background, rgba(0, 0, 0, 0))
    );
    box-shadow: 0 0 0 1px color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 65%, transparent),
      0 0 0 4px color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 25%, transparent);
  }

  button.processing.processing--deploy::after {
    opacity: 1;
    border-color: color-mix(in srgb, var(--vscode-testing-iconPassed, #73c991) 80%, transparent);
    border-top-color: transparent;
    border-right-color: transparent;
  }

  button.processing.processing--destroy {
    color: var(--vscode-button-foreground);
    background-color: color-mix(
      in srgb,
      var(--vscode-testing-iconFailed, #f14c4c) 40%,
      var(--vscode-button-background, rgba(0, 0, 0, 0))
    );
    box-shadow: 0 0 0 1px color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 65%, transparent),
      0 0 0 4px color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 25%, transparent);
  }

  button.processing.processing--destroy::after {
    opacity: 1;
    border-color: color-mix(in srgb, var(--vscode-testing-iconFailed, #f14c4c) 85%, transparent);
    border-top-color: transparent;
    border-right-color: transparent;
  }

  @keyframes deploy-processing-spinner {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }

  .navbar-brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .navbar-end {
    margin-left: auto;
    display: flex;
    align-items: center;
  }

  /* Column utilities */
  .column {
    background-color: var(--vscode-panel-background);
    flex: 1 1 0%;
  }

  .columns {
    display: flex;
    flex-wrap: wrap;
    margin-left: -0.5rem;
    margin-right: -0.5rem;
  }

  .columns>* {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  /* Size utilities matching Bulma */
  .is-size-7 {
    font-size: 0.75rem;
  }

  .is-size-6 {
    font-size: 0.875rem;
  }

  .is-size-5 {
    font-size: 1rem;
  }

  .is-size-4 {
    font-size: 1.125rem;
  }

  /* Visibility utilities */
  .is-hidden {
    display: none;
  }

  /* Flex utilities matching Bulma */
  .is-flex {
    display: flex;
  }

  .is-flex-direction-column {
    flex-direction: column;
  }

  .is-justify-content-space-between {
    justify-content: space-between;
  }

  .is-justify-content-center {
    justify-content: center;
  }

  .is-justify-content-flex-end {
    justify-content: flex-end;
  }

  .is-align-items-center {
    align-items: center;
  }

  /* VSCode Theme Components - Reusable across all panels */

  /* VSCode-compliant checkbox styling */
  .vscode-checkbox {
    width: 18px;
    height: 18px;
    appearance: none;
    -webkit-appearance: none;
    background: var(--vscode-checkbox-background, var(--vscode-input-background));
    border: 1px solid var(--vscode-checkbox-border, var(--vscode-input-border));
    border-radius: 3px;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
    margin: 0;
  }

  .vscode-checkbox:hover {
    background: var(--vscode-checkbox-background, var(--vscode-input-background));
    border-color: var(--vscode-focusBorder);
  }

  .vscode-checkbox:checked {
    background: var(--vscode-checkbox-background, var(--vscode-input-background));
    border-color: var(--vscode-checkbox-border, var(--vscode-input-border));
  }

  .vscode-checkbox:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--vscode-checkbox-foreground, var(--vscode-foreground));
    font-size: 14px;
    font-weight: bold;
    line-height: 1;
  }

  .vscode-checkbox:focus {
    outline: 1px solid var(--vscode-focusBorder);
    outline-offset: 1px;
  }

  .checkbox-label {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    color: var(--vscode-foreground);
    user-select: none;
    cursor: pointer;
  }

  /* VSCode-compliant label styling */
  .vscode-label {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    font-weight: var(--vscode-font-weight, normal);
    color: var(--vscode-foreground);
  }

  /* Section headers */
  .vscode-section-header {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    font-weight: 600;
    color: var(--vscode-descriptionForeground);
  }

  /* Dynamic entry styles for form inputs with delete buttons */
  .dynamic-entry {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    width: 100%;
    padding-right: 0.5rem;
  }

  .dynamic-entry input {
    flex: 1;
    min-width: 0;
  }

  .dynamic-entry button,
  .dynamic-delete-btn {
    padding: 0.25rem 0.5rem;
    background: transparent;
    /* Use descriptionForeground as base with reduced opacity for subtle appearance */
    color: var(--vscode-descriptionForeground, var(--vscode-foreground));
    opacity: 0.7;
    border: 1px solid var(--vscode-input-border);
    border-radius: 0.25rem;
    cursor: pointer;
    flex-shrink: 0;
    transition: all 0.2s ease;
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
  }

  .dynamic-entry button:hover,
  .dynamic-delete-btn:hover {
    /* Force red color - try VSCode variables first, then fallback to hard red */
    color: #dc3545 !important;
    /* Bootstrap danger red - guaranteed to be visible */
    opacity: 1 !important;
    /* Use list hover background which is consistently defined across themes */
    background: var(--vscode-list-hoverBackground, rgba(220, 53, 69, 0.1)) !important;
    border-color: var(--vscode-focusBorder, #dc3545) !important;
  }

  .xiom-mda-section {
    margin-left: 1.5rem;
    padding-left: 1rem;
    border-left: 1px solid var(--border);
  }

  .add-xiom-btn {
    margin-left: 0;
    align-self: flex-start;
  }

  .component-section-label {
    margin-bottom: 0.5rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.25rem;
  }

  /* Panel tab navigation */
  .panel-tabs {
    display: flex;
    border-bottom: 1px solid var(--vscode-panel-border);
    -webkit-overflow-scrolling: touch;
  }

  /* Default: allow simple horizontal scroll where used */
  .panel-tabs:not(.panel-tabs--with-arrows) {
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: thin;
    /* Firefox */
  }

  /* Prevent tab buttons from shrinking; enable horizontal scroll */
  .panel-tabs .panel-tab-button {
    flex: 0 0 auto;
  }

  /* Scrollable Tab Bar with Arrow Buttons */
  .panel-tabs--with-arrows {
    align-items: center;
    gap: 4px;
  }

  .panel-tabs--with-arrows .tab-scroll-viewport {
    position: relative;
    flex: 1 1 auto;
    overflow-x: auto;
    /* scroll happens here */
    overflow-y: hidden;
    scrollbar-width: none;
    /* Firefox: hide */
  }

  .panel-tabs--with-arrows .tab-strip {
    display: flex;
    width: max-content;
    /* shrink to content so viewport can scroll */
    gap: 0;
    /* buttons already have padding */
  }

  .panel-tabs--with-arrows .tab-scroll-viewport::-webkit-scrollbar {
    display: none;
    /* Chrome/Safari: hide */
  }

  .tab-scroll-btn {
    appearance: none;
    background: transparent;
    color: var(--vscode-foreground);
    border: 1px solid transparent;
    border-radius: 4px;
    padding: 2px 6px;
    cursor: pointer;
    transition: background 0.15s ease, color 0.15s ease, opacity 0.15s ease;
  }

  .tab-scroll-btn:hover {
    background: var(--vscode-list-hoverBackground);
  }

  .tab-scroll-btn:disabled {
    opacity: 0.4;
    cursor: default;
  }

  .panel-tab-button {
    padding: 0.5rem 1rem;
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    font-weight: 500;
    background-color: transparent;
    color: var(--vscode-foreground);
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .panel-tab-button:hover {
    background-color: var(--vscode-list-hoverBackground);
  }

  .panel-tab-button:focus {
    outline: none;
  }

  .panel-tab-button.tab-active {
    border-bottom-color: var(--vscode-activityBarBadge-background, var(--accent));
    color: var(--vscode-activityBarBadge-background, var(--accent));
    background-color: var(--vscode-tab-activeBackground);
  }

  /* Panel-specific font overrides */
  .panel-editor {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
  }

  .panel-editor .panel-heading {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    font-weight: 600;
  }

  .panel-editor input,
  .panel-editor select,
  .panel-editor textarea,
  .panel-editor button {
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
  }

  /* Migrated from style.css */
  .panel-overlay {
    background-color: var(--vscode-editorWidget-background) !important;
    border: 1px solid var(--vscode-editorWidget-border) !important;
    position: fixed;
    z-index: 9999;
    box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
  }

  .navbar-element-4a {
    background-color: var(--vscode-titleBar-activeBackground);
  }

  .ViewPortDrawer {
    background-color: var(--vscode-panel-background);
    border: 1px solid var(--vscode-panel-border);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .box {
    background-color: var(--vscode-panel-background);
    border: 1px solid var(--vscode-panel-border);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .panel-tabContainer {
    background-color: var(--vscode-panel-background);
    padding: 0;
  }

  .loading {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 6rem;
    height: 6rem;
    transform: translate(-50%, -50%);
  }

  /* Cytoscape context menu styling */
  .cxtmenu {
    background-color: var(--vscode-dropdown-background);
    border: 1px solid var(--vscode-dropdown-border);
  }

  .cxtmenu-item {
    color: var(--vscode-dropdown-foreground);
  }

  .cxtmenu-item:hover {
    background-color: var(--vscode-list-hoverBackground);
  }
}

/* Custom utility classes */
@layer utilities {

  /* Text utilities */
  .has-text-weight-normal {
    font-weight: 400;
  }

  .has-text-weight-medium {
    font-weight: 500;
  }

  .has-text-weight-semibold {
    font-weight: 600;
  }

  .has-text-weight-bold {
    font-weight: 700;
  }

  .has-text-weight-light {
    font-weight: 300;
  }

  .has-text-white {
    color: #ffffff;
  }

  .has-text-left {
    text-align: left;
  }

  .has-text-right {
    text-align: right;
  }

  .has-text-center {
    text-align: center;
  }

  /* Background utilities */
  .has-background-4a {
    background-color: var(--vscode-titleBar-activeBackground);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  /* Unselectable text */
  .is-unselectable {
    user-select: none;
  }

  /* Prevent text selection on body by default - only allow in specific areas */
  body {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }

  /* Allow text selection in input fields, textareas, and editable content */
  input,
  textarea,
  [contenteditable="true"],
  .selectable-text {
    user-select: text;
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
  }

  /* Field utilities */
  .field {
    margin-bottom: 1rem;
  }

  /* Form group utility */
  .form-group {
    padding-bottom: 0.5rem;
    /* same as Tailwind pb-2 */
  }

  .control {
    position: relative;
  }

  .has-icons-left .icon {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
  }

  .has-icons-left .input-field {
    padding-left: 2.5rem;
  }

  /* Link utilities */
  .link {
    color: var(--vscode-textLink-foreground);
  }

  .link:hover {
    color: var(--vscode-textLink-activeForeground, var(--vscode-textLink-foreground));
  }

  .text-secondary {
    color: var(--text-secondary);
  }

  .border-default {
    border-color: var(--border);
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Override cytoscape default styles for VSCode theme */
#cy {
  background-color: var(--vscode-editor-background);
  position: absolute !important;
  top: var(--navbar-height) !important;
  right: 0 !important;
  bottom: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: calc(100% - var(--navbar-height)) !important;
}

#cy:focus {
  outline: none;
}

#cy-leaflet {
  position: absolute !important;
  top: var(--navbar-height) !important;
  right: 0 !important;
  bottom: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: calc(100% - var(--navbar-height)) !important;
}
